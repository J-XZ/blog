---
layout: post
category: CSAPP
title: 动态链接
---

# GOT, PLT and dynamic linking

可以使用linux命令file查看可执行文件的类型。比如查看/bin/bash文件的类型：

```sh
$ file /bin/bash
/bin/bash: ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, BuildID[sha1]=a6cb40078351e05121d46daa768e271846d5cc54, for GNU/Linux 3.2.0, stripped

```

可以看到/bin/bash是一个动态链接的可执行文件，interpreter是/lib64/ld-linux-x86-64.so.2

---

用两个文件举例

symbol.c

```c 
// symbol.c
int my_var = 42;
int my_func(int a, int b) {
    return a + b;
}
```

main.c

```c 
// main.c
int var = 10;
extern int my_var;
extern int my_func(int, int);
 
int main() {
    int a, b;
    a = var;
    b = my_var;
    return my_func(a, b);
}
```



---

将symbol.c编译为动态链接库

```sh 
gcc -g -shared -fPIC symbol.c -o libsymbol.so
```

