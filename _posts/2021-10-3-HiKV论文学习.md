---
layout: post 
category: papers 
---
---
DRAM写入快，NVM写入慢，两者读取速度差不多

HiKV充分发挥了哈希表索引和B+树索引的优点。

将哈希表建立在NVM上，将B+树索引构建在DRAM上

PCM和ReRAM都是新兴的NVM（NAND Flash是旧的NVM），新的NVM再读取性能和随机访问性能上都已经很接近DRAM（内存），但是他们在写性能上不如DRAM，而且NVM可以被写的次数是有限的，所以优化目标是减少写次数。

哈希支持快速的查找定位，B+树支持方便的遍历。由于B+树更新操作需要大量写操作，所以只把B+树建立在内存中。

为了处理并发的请求，哈希索引被划分为多个部分。

---

B+树更新得慢，为了不让他拖后腿，异步地在后台更新他。只保证哈希索引和k-v对同步更新。

![image-20211004195541002](../../www/assets/pic/image-20211004195541002.png)

以为工作负载可能不同、dram和nvm的速率也不同，所以serving threads和backend threads的数量需要动态平衡

