---
layout: post 
category: CSAPP 
---

---

$$
中断\left\{  
	\begin{array}{**lr**}  
    	同步中断(synchronous/异常/exception)
    		\left\{
    			\begin{array}{**lr**}
    				错误(Faults)\\
    				陷阱(Traps)\\
    				终止(Aborts)\\
    			\end{array}
    		\right.
    	\\
    	异步中断(asynchronous/狭义的inteerrupt)
	\end{array}  
\right.
$$

---

硬件提供可供256个服务程序中断进入的入口，即中断向量。中断向量在保护模式下的实现机制是中断描述符表idt，idt的位置由idtr确定,idtr是个48位的寄存器，高32位是idt的基址，低16位为idt的界限(通常为2k=256*8)。idt中包含256个中断描述符，对应256个中断向量；每个中断描述符8位。

---

**同步中断**在指令执行时由CPU控制单元产生，只有一条指令终止执行后CPU才会发出中断。


$$
\left\{  
	\begin{array}{**lr**}  
		陷阱：有意的异常，比如系统调用\\
		故障：错误情况引起，可能可以被修正\\
		终止：不可恢复的致命错误，比如DRAM位被损坏发生奇偶校验出错
	\end{array}  
\right.
$$


Intel公司保留0-31号中断向量用来处理异常事件：当产生一个异常时，处理机就会自动把控制转移到相应的处理程序的入口，异常的处理程序由操作系统提供，中断向量和异常事件对应如下：


$$
\left\{  
	\begin{array}{**lr**}  
		0:除法错误\\
		1:调试异常\\
		2:NMI中断\\
		3:单字节，int 3\\
		4:溢出\\
		5:边界监测中断\\
		6:无效操作码\\
		7:设备不可用\\
		8:双重故障\\
		9:协处理器段溢出\\
		10:无效TSS\\
		11:缺段中断\\
		12:堆栈异常\\
		13:一般保护异常\\
		14:页异常\\
		15:intel保留\\
		16:协处理器出错\\
		17:对齐检查中断
	\end{array}  
\right.
$$


---

Linux将中断号0x80用于系统调用
