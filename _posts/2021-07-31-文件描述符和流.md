---
layout: post 
category: CSAPP 
---
---

gnu官网对文件描述符和流的介绍

当你想对一个文件进行输入或输出时，你可以选择两种基本机制来表示你的程序和文件之间的连接：文件描述符和流。文件描述符被表示为int类型的对象，而流被表示为FILE * 对象。

文件描述符为输入和输出操作提供了一个原始的、低层次的接口。文件描述符和流都可以表示与一个设备（如终端）的连接，或与另一个进程通信的管道或套接字，以及一个普通的文件。但是，如果你想做特定于某类设备的控制操作，你必须使用文件描述符；没有设施可以以这种方式使用流。如果你的程序需要在特殊模式下进行输入或输出，例如非阻塞（或轮询）输入，你也必须使用文件描述符（参见文件状态标志）。

流提供了一个更高级的接口，分层在原始的文件描述符设施之上。流接口对各种文件的处理方式基本相同，唯一的例外是你可以选择三种缓冲方式（见流缓冲）。

使用流接口的主要优点是，在流上执行实际的输入和输出操作（相对于控制操作）的函数集比文件描述符的相应设施要丰富和强大得多。文件描述符接口只提供了传输字符块的简单功能，但流接口还提供了强大的格式化输入和输出功能（printf和scanf），以及面向字符和行的输入和输出功能。

由于流是以文件描述符的形式实现的，你可以从流中提取文件描述符，并直接在文件描述符上执行低级别的操作。你也可以最初将一个连接作为一个文件描述符打开，然后制作一个与该文件描述符相关的流。

**一般来说，你应该坚持使用流而不是文件描述符，除非有一些你想做的特定操作只能在文件描述符上完成。如果你是一个初学的程序员，不确定要使用哪些函数，我们建议你专注于格式化输入函数（见格式化输入）和格式化输出函数（见格式化输出）。**

如果您关心您的程序在GNU以外的系统中的可移植性，您也应该知道文件描述符并不像流那样可移植。您可以期望任何运行ISO C的系统都支持流，但非GNU系统可能根本不支持文件描述符，或者只实现GNU中操作文件描述符的函数子集。然而，GNU C 库中的大多数文件描述符函数都包含在 POSIX.1 标准中。

