---
layout: post 
category: CSAPP 
---

---

客户端-服务器模型

基本操作：**事务** $\Rightarrow$ 1、客户端向服务器发送请求，发起事务；2、服务器收到请求后解释之，并以适当的方式操作其资源；3、服务器给客户端发送响应，并等待下一个请求；4、客户端收到响应并处理

客户端和服务器都是**进程**

把网络视为一种I/O设备（通常使用DMA传送）

---

IP地址是32位无符号整数

存放在in_addr结构体中

```c
 /* Internet address */
struct in_addr {
	uint32_t       s_addr;     /* address in network byte order */
};
```

TCP/IP定义统一的网络字节顺序，大端字节顺序

操作系统提供的字节顺序转换函数：

```c
 #include <arpa/inet.h>
//h表示host主机字节顺序,n表示net网络字节顺序
uint32_t htonl(uint32_t hostlong);
uint16_t htons(uint16_t hostshort);
uint32_t ntohl(uint32_t netlong);
uint16_t ntohs(uint16_t netshort);
```

IP地址通常用点分十进制表示，把四个字节分别表示为他们的十进制形式

查找自己主机的地址

```bash
$ hostname -i
```

转换函数

```c
int main() {
    unsigned int bin_address;
    inet_pton(AF_INET, "127.0.0.1", &bin_address);
    printf("%x\n", bin_address);
    //输出100007f，因为是大端法，实际为0x7f 0x00 0x00 0x01,就是127.0.0.1
    char s[50];
    unsigned char cp[] = {(unsigned char)127,(unsigned char)0,(unsigned char)0,(unsigned char)1};
    printf("%s\n", inet_ntop(AF_INET, cp, s, sizeof(s)));
    //输出127.0.0.1,输入的cp串是四个字节共32比特，因为是大端法，所以是先127
}
```



